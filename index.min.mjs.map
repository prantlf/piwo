{"version":3,"file":"index.min.mjs","sources":["/piwo/shared/helpers.js","/piwo/shared/globals.js","/piwo/shared/element.js","/piwo/elements/button.js","/piwo/shared/field.js","/piwo/elements/checkbox.js","/piwo/elements/container.js","/piwo/elements/h.js","/piwo/elements/hr.js","/piwo/elements/input.js","/piwo/elements/label.js","/piwo/elements/link.js","/piwo/elements/p.js","/piwo/elements/small.js","/piwo/elements/spacer.js","/piwo/elements/textarea.js"],"sourcesContent":["export function upgradeProperty(element, name) {\n  if (Object.hasOwn(element, name)) {\n    const value = element[name]\n    delete element[name]\n    element[name] = value\n  }\n}\n\nexport function findClosestAncestorByTagName(element, tagName) {\n\tfor (let parent;;) {\n    parent = element.parentElement\n    if (parent === null) {\n      return null\n    }\n\t\tif (parent.tagName === tagName) {\n\t\t\treturn parent\n\t\t}\n\t}\n}\n\nexport function findLabels(element) {\n  const labelIds = element.getAttribute('aria-labelledby')\n  if (labelIds) {\n    const root = element.getRootNode()\n    return labelIds\n      .trim()\n      .split(/ +/)\n      .reduce((labels, id) => {\n        const label = root.getElementById(id.trim())\n        if (label) {\n          labels.push(label)\n        }\n        return labels\n      }, [])\n  }\n}\n\nexport function formatPlural(count, word) {\n  const suffix = count === 1 ? '' : 's'\n  return `${count} ${word}${suffix}`\n}\n\nexport function onDisabledChange(element, value) {\n  if (value) {\n    const root = element.getRootNode()\n    if (root.activeElement === element) {\n      element.blur()\n    }\n    if (element.tabIndex >= 0) {\n      element.tabIndex = -1\n    }\n  } else {\n    if (element.tabIndex < 0) {\n      element.tabIndex = 0\n    }\n  }\n}\n\nexport function markValid(element) {\n  if (element[messageElement]) {\n    element[messageElement].textContent = element[originalMessage]\n    if (!element[originalMessage]) {\n      element[messageElement].style.display = 'none'\n    }\n    element[messageElement] = null\n    element[originalMessage] = ''\n  }\n}\n\nexport function markInvalid(element) {\n  if (ensureMessageElement(element)) {\n    element[messageElement].style.display = ''\n    element[messageElement].textContent = element.validationMessage\n    const { form } = element\n    if (element.focusError && !form?.errorFocused) {\n      if (form) {\n        form.errorFocused = true\n      }\n      element.focus()\n      if (form) {\n        setTimeout(() => {\n          form.errorFocused = false\n        })\n      }\n    }\n  }\n}\n\nconst messageElement = Symbol('messageElement')\nconst originalMessage = Symbol('originalMessage')\n\nexport function ensureMessageElement(element) {\n  const messageIds = element.getAttribute('aria-describedby')\n  if (messageIds) {\n    const messageId = messageIds.trim().split(/ +/).slice(-1)[0]\n    if (messageId) {\n      const errorElement = document.getElementById(messageId.trim())\n      if (errorElement) {\n        if (errorElement !== element[messageElement]) {\n          element[messageElement] = errorElement\n          element[originalMessage] = errorElement.textContent\n          if (!element[originalMessage]) {\n            element[messageElement].style.display = 'none'\n          }\n        }\n        return true\n      }\n    }\n  }\n}\n\nexport function setCustomError(element, anchor, message) {\n  if (message) {\n    element[internals].setValidity({ customError: true }, message, anchor)\n  } else {\n    element[internals].setValidity({})\n  }\n}\n\nexport function createErrorAnchor(element) {\n  const errorAnchor = document.createElement('input')\n  errorAnchor.tabIndex = -1\n  errorAnchor.ariaHidden = 'true'\n  element.shadowRoot.appendChild(errorAnchor)\n  return errorAnchor\n}\n","import stylesheet from './globals.css'\n\ndocument.adoptedStyleSheets.push(stylesheet)\n","import { upgradeProperty } from './helpers.js'\nimport commonStylesheet from './common.css'\n\nconst internals = Symbol('internals')\n\nconst ElementMixin = (ParentElement, {\n  internals: enableInternals,\n  attributes = {},\n  interactive,\n  delegatesFocus\n} = {}) => {\n  const observedAttributeNames = []\n\n  class ChildElement extends ParentElement {\n    constructor() {\n      super()\n      if (enableInternals) {\n        this[internals] = this.attachInternals()\n      }\n\n      this.attachShadow({ mode: 'open', delegatesFocus })\n      this.shadowRoot.adoptedStyleSheets = [commonStylesheet]\n\n      for (const attributeName in attributes) {\n        const propertyName = attributes[attributeName].property ?? attributeName\n        upgradeProperty(this, propertyName)\n      }\n    }\n\n    // ----- life-cycle callbacks\n\n    static get observedAttributes() {\n      return observedAttributeNames\n    }\n\n    attributeChangedCallback(name, _oldValue, newValue) {\n      const { property, boolean } = attributes[name]\n      this[property ?? name] = boolean ? newValue != null : newValue\n    }\n  \n    connectedCallback() {\n      // not yet in internals - https://github.com/WICG/webcomponents/issues/762\n      if (interactive && !this.hasAttribute('tabindex')) {\n        this.tabIndex = this.disabled ? -1 : 0\n      }\n    }\n  }\n\n  const { prototype } = ChildElement\n  const properties = {}\n  for (const attributeName in attributes) {\n    const attribute = attributes[attributeName]\n    let { property, type, value, internals: enableInternals, aria, state, reflect, set } = attribute\n    const propertyName = property ?? attributeName\n    const symbol = Symbol(propertyName)\n\n    let boolean\n    let number\n    if (value === undefined) {\n      if (type === 'boolean') {\n          boolean = attribute.boolean = true\n          value = false\n      } else if (type === 'number') {\n        number = attribute.number = true\n        value = 0\n      } else { // string\n        value = ''\n      }\n    } else if (type === undefined) {\n      if (typeof value === 'boolean') {\n        boolean = true\n      } else if (typeof value === 'number') {\n        number = attribute.number = true\n      }\n    } else {\n      switch (type) {\n        case 'boolean':\n          boolean = attribute.boolean = true\n          break\n        case 'number':\n          number = attribute.number = true\n      }\n    }\n\n    prototype[symbol] = value\n\n    if (aria === true) {\n      aria = `aria${propertyName.charAt(0).toUpperCase()}${propertyName.slice(1)}`\n    }\n\n    let setter\n    if (boolean) {\n      if (state) {\n        if (state === true) state = propertyName\n        setter = function (value) {\n          value = Boolean(value)\n          if (value === this[symbol]) return\n          this[symbol] = value\n          if (value) this[internals].states.add(state)\n          else this[internals].states.delete(state)\n          if (aria) this[internals][aria] = String(value)\n          if (reflect) this.toggleAttribute(attributeName, value)\n          if (set) set.call(this, value)\n        }\n      } else {\n        setter = function (value) {\n          value = Boolean(value)\n          if (value === this[symbol]) return\n          this[symbol] = value\n          if (enableInternals) this[internals][propertyName] = value\n          if (aria) this[internals][aria] = String(value)\n          if (reflect) this.toggleAttribute(attributeName, value)\n          if (set) set.call(this, value)\n        }\n      }\n    } else if (number) {\n      setter = function (value) {\n        if (value == null) {\n          value = 0\n        } else { \n          value = Number(value)\n          if (Number.isNaN(value)) value = 0\n        }\n        if (value === this[symbol]) return\n        this[symbol] = value\n        if (enableInternals) this[internals][propertyName] = value\n        if (aria) this[internals][aria] = String(value)\n        if (reflect) this.setAttribute(attributeName, String(value))\n        if (set) set.call(this, value)\n      }\n    } else {\n      setter = function (value) {\n        if (value == null) value = ''\n        else value = String(value)\n        if (value === this[symbol]) return\n        this[symbol] = value\n        if (enableInternals) this[internals][propertyName] = value\n        if (aria) this[internals][aria] = value\n        if (reflect) this.setAttribute(attributeName, value)\n        if (set) set.call(this, value)\n      }\n    }\n\n    properties[propertyName] = {\n      configurable: true,\n      enumerable: true,\n      get() {\n        return this[symbol]\n      },\n      set: setter\n    }\n\n    observedAttributeNames.push(attributeName)\n  }\n\n  Object.defineProperties(prototype, properties)\n\n  return ChildElement\n}\n\nexport { ElementMixin, internals }\n","import { ElementMixin, internals } from '../shared/element.js'\nimport { findClosestAncestorByTagName, onDisabledChange } from '../shared/helpers.js'\nimport thisStylesheet from './button.css'\n\nclass PiWoButton extends ElementMixin(HTMLElement, {\n  internals: true,\n  attributes: {\n    disabled: {\n      type: 'boolean', aria: true, state: true, reflect: true,\n      set(value) {\n        onDisabledChange(this, value)\n      }\n    },\n    name: { type: 'string', reflect: true },\n    type: { type: 'string', reflect: true }\n  },\n  interactive: true\n}) {\n  static get formAssociated() {\n    return true\n  }\n\n  constructor() {\n    super()\n    this[internals].role = 'button'\n\n    const slot = document.createElement('slot')\n    this.shadowRoot.appendChild(slot)\n    this.shadowRoot.adoptedStyleSheets.push(thisStylesheet)\n\n    this.addEventListener('click', event => this.#handleClick(event))\n    this.addEventListener('keyup', event => this.#handleKeyUp(event))\n  }\n\n  // ----- properties\n\n  get form() {\n    return this[internals].form\n  }\n\n  // ----- event handlers\n\n  #handleClick(event) {\n    if (!this.disabled &&\n        !(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey)) {\n      // give a chance to handlers registered outside of this element\n      // to prevent the default behaviour\n      setTimeout(() => {\n        if (event.defaultPrevented) return\n        // submit and reset buttons cannot be marked yet - https://github.com/WICG/webcomponents/issues/814\n        const form = this.#getForm()\n        if (form) {\n          switch (this.type) {\n            case 'reset':\n              form.reset()\n              break\n            default: // '' and 'submit'\n              this.#submitForm(form)\n          }\n        }\n      })\n    }\n  }\n\n  #handleKeyUp(event) {\n    if (!this.disabled &&\n        (event.keyCode === 13 || event.keyCode === 32) &&\n        !(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey)) {\n      this.click()\n    }\n  }\n\n  // ----- submitting the connected form\n\n  #getForm() {\n    return this.form ?? findClosestAncestorByTagName(this, 'FORM')\n  }\n\n  #submitForm(form) {\n    const { name } = this\n    if (name) {\n      this[internals].setFormValue(this.textContent.trim())\n    }\n    const submitter = document.createElement('input')\n    submitter.button = this\n    submitter.type = 'submit'\n    this.insertAdjacentElement('afterend', submitter)\n    form.submitter = submitter\n    form.requestSubmit(submitter)\n    // let submit handlers to create FormData with the submitter's name and value\n    setTimeout(() => {\n      if (name) {\n        this[internals].setFormValue(null)\n      }\n      form.submitter = undefined\n      submitter.remove()\n    })\n  }\n}\n\ncustomElements.define('piwo-button', PiWoButton)\n","import { internals } from './element.js'\nimport { findLabels, markInvalid } from './helpers.js'\n\nconst FieldMixin = ParentElement => {\n  class FieldElement extends ParentElement {\n    static get formAssociated() {\n      return true\n    }\n\n    constructor() {\n      super()\n\n      this.addEventListener('invalid', event => this.#handleInvalid(event))\n    }\n\n    // ----- properties\n\n    get form() {\n      return this[internals].form\n    }\n\n    get labels() {\n      const labels = this[internals].labels\n      if (labels.length) return labels\n      return findLabels(this)\n    }\n\n    // ----- life-cycle callbacks\n\n    static get observedAttributes() {\n      return observedAttributeNames\n    }\n\n    attributeChangedCallback(name, _oldValue, newValue) {\n      const { property, boolean } = attributes[name]\n      this[property ?? name] = boolean ? newValue != null : newValue\n    }\n  \n    connectedCallback() {\n      // not yet in internals - https://github.com/WICG/webcomponents/issues/762\n      if (interactive && !this.hasAttribute('tabindex')) {\n        this.tabIndex = this.disabled ? -1 : 0\n      }\n    }\n\n    // ----- event handlers\n\n    #handleInvalid(event) {\n      // detect if `reportValidity` was called from a user interaction\n      if (event.explicitOriginalTarget && event.explicitOriginalTarget !== this || this.form.submitter) {\n        this.ariaInvalid = 'true'\n        if (this.describeError) {\n          event.preventDefault()\n          markInvalid(this)\n        }\n      }\n    }\n\n    // ----- form validation\n\n    get willValidate() {\n      return this[internals].willValidate\n    }\n\n    get validity() {\n      return this[internals].validity\n    }\n\n    get validationMessage() {\n      return this[internals].validationMessage\n    }\n\n    // #invalidEvent\n\n    checkValidity() {\n      return this[internals].checkValidity()\n      // if (this.willValidate) {\n      //   if (this.required && !this.checked) {\n      //     // this.ariaInvalid = 'true'\n      //     this[internals].setValidity({ valueMissing: true },\n      //       'Please check this box if you want to proceed.', this.#errorAnchor)\n      //     // this.setAttribute('aria-errormessage', this[internals].validationMessage)\n      //     this.#invalidEvent = new CustomEvent('invalid', {\n      //       bubbles: true,\n      //       cancelable: true,\n      //       composed: true\n      //     })\n      //     this.dispatchEvent(this.#invalidEvent)\n      //     return false\n      //   }\n      // }\n      // // this.ariaInvalid = 'false'\n      // this[internals].setValidity({})\n      // // this.toggleAttribute('aria-errormessage', true)\n      // return true\n    }\n\n    reportValidity() {\n      this.ariaInvalid = String(!this.validity.valid)\n      return this[internals].reportValidity()\n      // const result = this.checkValidity()\n      // if (result) {\n      //   this.#errorAnchor.textContent = ''\n      // } else {\n      //   this.#errorAnchor.textContent = this.#invalidEvent.defaultPrevented\n      //     ? '' : this[internals].validationMessage\n      // }\n      // return result\n    }\n  }\n\n  return FieldElement\n}\n\nexport { FieldMixin }\n","import { ElementMixin, internals } from '../shared/element.js'\nimport { FieldMixin } from '../shared/field.js'\nimport { ensureMessageElement, markInvalid, markValid, onDisabledChange, setCustomError } from '../shared/helpers.js'\nimport thisStylesheet from './checkbox.css'\n\nconst updateValidity = Symbol('updateValidity')\n\nclass PiWoCheckbox extends FieldMixin(ElementMixin(HTMLElement, {\n  internals: true,\n  attributes: {\n    disabled: {\n      type: 'boolean', aria: true, state: true, reflect: true,\n      set(value) {\n        onDisabledChange(this, value)\n      }\n    },\n    readonly: { type: 'boolean', aria: 'ariaReadOnly', state: true, reflect: true },\n    required: { type: 'boolean', aria: 'ariaReadOnly', state: true, reflect: true },\n    describeerror: { type: 'boolean', property: 'describeError', reflect: true },\n    focuserror: { type: 'boolean', property: 'focusError', reflect: true },\n    name: { type: 'string', reflect: true },\n    checked: {\n      type: 'boolean', aria: true, state: true,\n      set() {\n        this[internals].states.delete('indeterminate')\n        this[updateValidity]()\n      }\n    },\n    indeterminate: {\n      type: 'boolean', state: true,\n      set(value) {\n        if (value) {\n          this[internals].ariaChecked = 'mixed'\n        } else {\n          this[internals].ariaChecked = String(this.checked)\n        }\n      }\n    }\n  },\n  interactive: true\n})) {\n  #errorAnchor\n\n  constructor() {\n    super()\n    this[internals].role = 'checkbox'\n    this[internals].ariaChecked = 'false'\n\n    this.shadowRoot.adoptedStyleSheets.push(thisStylesheet)\n    this.#errorAnchor = createErrorAnchor(this)\n\n    // this.#errorAnchor.addEventListener('focus', () => this.focus())\n    this.addEventListener('click', event => this.#handleClick(event))\n    this.addEventListener('keyup', event => this.#handleKeyUp(event))\n  }\n\n  // ----- properties\n\n  get type() {\n    return this.localName\n  }\n\n  // ----- life-cycle callbacks\n\n  connectedCallback() {\n    super.connectedCallback()\n    const keepValid = this.getAttribute('aria-invalid') === 'false'\n    this.checked = this.hasAttribute('checked')\n    if (this.hasAttribute('indeterminate')) {\n      this.indeterminate = true\n    }\n    this[updateValidity](keepValid)\n    if (this.validity.valid) {\n      ensureMessageElement(this)\n    }\n  }\n\n  formResetCallback() {\n    this.checked = this.hasAttribute('checked')\n  }\n\n  formStateRestoreCallback(state, _mode) { // restore or autocomplete\n    this.checked = state === 'checked'\n  }\n\n  // formAssociatedCallback(form) {\n  // }\n\n  // formDisabledCallback(disabled) {\n  //   this.disabled = disabled\n  // }\n\n  // ----- event handlers\n\n  #handleClick(event) {\n    if (!(this.disabled || this.readonly) &&\n        !(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey)) {\n      // give a chance to handlers registered outside of this element\n      // to prevent the default behaviour\n      setTimeout(() => {\n        if (event.defaultPrevented) return\n\n        const beforeInput = new CustomEvent('beforeinput', {\n          bubbles: true,\n          cancelable: true,\n          composed: true\n        })\n        this.dispatchEvent(beforeInput)\n        if (beforeInput.defaultPrevented) return\n\n        const flag = !this.checked\n        this.checked = flag\n\n        this.dispatchEvent(new CustomEvent('input', {\n          bubbles: true,\n          cancelable: false,\n          composed: true\n        }))\n        this.dispatchEvent(new CustomEvent('change', {\n          detail: {\n            checked: flag,\n          },\n          bubbles: true,\n          cancelable: false,\n          composed: true\n        }))\n      })\n    }\n  }\n\n  #handleKeyUp(event) {\n    if (!this.disabled &&\n        event.keyCode === 32 &&\n        !(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey)) {\n      // give a chance to handlers registered outside of this element\n      // to prevent the default behaviour\n      setTimeout(() => {\n        if (event.defaultPrevented) return\n        this.click()\n      })\n    }\n  }\n\n  setCustomValidity(message) {\n    // this.setAttribute('aria-errormessage', message)\n    // this.ariaInvalid = 'true' / 'false'\n    setCustomError(this, this.#errorAnchor, message)\n  }\n\n  [updateValidity](keepValid) {\n    if (this.checked) {\n      this[internals].setFormValue('on', 'checked')\n    } else {\n      this[internals].setFormValue(null)\n    }\n    if (this.required && !this.checked) {\n      this[internals].setValidity({ valueMissing: true },\n        'Please check this box if you want to proceed.', this.#errorAnchor)\n      if (this.getAttribute('aria-invalid') === 'true') {\n        markInvalid(this)\n      }\n    } else {\n      this[internals].setValidity({})\n      this.ariaInvalid = keepValid ? 'false': null\n      markValid(this)\n    }\n  }\n}\n\ncustomElements.define('piwo-checkbox', PiWoCheckbox)\n","import { ElementMixin } from '../shared/element.js'\nimport thisStylesheet from './container.css'\n\nclass PiWoContainer extends ElementMixin(HTMLElement) {\n  #slot\n\n  constructor() {\n    super()\n    this.#slot = document.createElement('slot')\n    this.shadowRoot.appendChild(this.#slot)\n    this.shadowRoot.adoptedStyleSheets.push(thisStylesheet)\n  }\n}\n\ncustomElements.define('piwo-container', PiWoContainer)\n","import { ElementMixin, internals } from '../shared/element.js'\nimport thisStylesheet from './h.css'\n\nclass PiWoHeading extends ElementMixin(HTMLElement, {\n  internals: true,\n  attributes: {\n    level: { type: 'string', aria: true, reflect: true }\n  }\n}) {\n  constructor() {\n    super()\n    this[internals].role = 'heading'\n\n    const slot = document.createElement('slot')\n    this.shadowRoot.appendChild(slot)\n    this.shadowRoot.adoptedStyleSheets.push(thisStylesheet)\n  }\n}\n\ncustomElements.define('piwo-h', PiWoHeading)\n","import { ElementMixin, internals } from '../shared/element.js'\nimport thisStylesheet from './hr.css'\n\nclass PiWoHorizontalRule extends ElementMixin(HTMLElement, {\n  internals: true\n}) {\n  constructor() {\n    super()\n    this[internals].role = 'separator'\n\n    this.shadowRoot.adoptedStyleSheets.push(thisStylesheet)\n  }\n}\n\ncustomElements.define('piwo-hr', PiWoHorizontalRule)\n","import { ElementMixin, internals } from '../shared/element.js'\nimport { FieldMixin } from '../shared/field.js'\nimport { ensureMessageElement, markInvalid, markValid, onDisabledChange } from '../shared/helpers.js'\nimport thisStylesheet from './input.css'\n\nconst innerInput = Symbol('innerInput')\nconst updateValidity = Symbol('updateValidity')\n\nclass PiWoInput extends FieldMixin(ElementMixin(HTMLElement, {\n  internals: true,\n  attributes: {\n    disabled: {\n      type: 'boolean', aria: true, state: true, reflect: true,\n      set(value) {\n        onDisabledChange(this, value)\n      }\n    },\n    readonly: { type: 'boolean', aria: 'ariaReadOnly', state: true, reflect: true },\n    required: {\n      type: 'boolean', aria: true, state: true, reflect: true,\n      set(value) {\n        this[innerInput].required = value\n      }\n    },\n    multiple: {\n      type: 'boolean', aria: true, reflect: true,\n      set(value) {\n        this[innerInput].multiple = value\n      }\n    },\n    describeerror: { type: 'boolean', property: 'describeError', reflect: true },\n    focuserror: { type: 'boolean', property: 'focusError', reflect: true },\n    name: { type: 'string', reflect: true },\n    type: {\n      type: 'string', reflect: true,\n      set(value) {\n        this[innerInput].type = value\n      }\n    },\n    autocomplete: {\n      type: 'string', reflect: true,\n      set() {\n        this[innerInput].autocomplete = value\n      }\n    },\n    pattern: {\n      type: 'string', reflect: true,\n      set(value) {\n        this[innerInput].pattern = value\n      }\n    },\n    placeholder: {\n      type: 'string', reflect: true,\n      set(value) {\n        this[innerInput].placeholder = value\n      }\n    },\n    max: {\n      type: 'string', reflect: true,\n      set(value) {\n        this[innerInput].max = value\n      }\n    },\n    min: {\n      type: 'string', reflect: true,\n      set(value) {\n        this[innerInput].min = value\n      }\n    },\n    step: {\n      type: 'number', reflect: true,\n      set(value) {\n        this[innerInput].step = value\n      }\n    },\n    maxlength: {\n      type: 'number', property: 'maxLength', value: -1, internals: true, reflect: true,\n      set(value) {\n        this[innerInput].maxLength = value\n      }\n    },\n    minlength: {\n      type: 'number', property: 'minLength', value: -1, internals: true, reflect: true,\n      set(value) {\n        this[innerInput].minLength = value\n      }\n    },\n    value: {\n      type: 'string',\n      set(value) {\n        this[innerInput].value = value\n        this[updateValidity]()\n      }\n    }\n  },\n  interactive: true,\n  delegatesFocus: true\n})) {\n  constructor() {\n    super()\n    this[internals].role = 'textbox'\n\n    this.shadowRoot.adoptedStyleSheets.push(thisStylesheet)\n    this[innerInput] = document.createElement('input')\n    this[innerInput].ariaHidden = 'true'\n    this.shadowRoot.appendChild(this[innerInput])\n\n    this[innerInput].addEventListener('beforeinput', event => this.#handleBeforeInput(event))\n    this[innerInput].addEventListener('input', event => this.#handleInputAndChange(event))\n    this[innerInput].addEventListener('change', event => this.#handleInputAndChange(event))\n  }\n\n  // ----- life-cycle callbacks\n\n  connectedCallback() {\n    super.connectedCallback()\n    const keepValid = this.getAttribute('aria-invalid') === 'false'\n    this.value = this.getAttribute('value')\n    this[updateValidity](keepValid)\n    if (this.validity.valid) {\n      ensureMessageElement(this)\n    }\n  }\n\n  formResetCallback() {\n    this.value = this.getAttribute('value')\n  }\n\n  formStateRestoreCallback(state, _mode) { // restore or autocomplete\n    this.value = state\n  }\n\n  // formAssociatedCallback(form) {\n  // }\n\n  formDisabledCallback(disabled) {\n    this[innerInput].disabled = disabled\n  }\n\n  // ----- event handlers\n\n  #handleBeforeInput(event) {\n    const newEvent = this.#forwardEvent(event)\n    if (newEvent.defaultPrevented) {\n      event.preventDefault()\n    }\n  }\n\n  #handleInputAndChange(event) {\n    this.value = this[innerInput].value\n    this.#forwardEvent(event)\n  }\n\n  #forwardEvent(event) {\n    const newEvent = new event.constructor(event.type, event)\n    this.dispatchEvent(newEvent)\n    return newEvent\n  }\n\n  // ----- form validation\n\n  checkValidity() {\n    return super.checkValidity() && this[innerInput].checkValidity()\n  }\n\n  reportValidity() {\n    return super.reportValidity() && this[innerInput].checkValidity()\n  }\n\n  setCustomValidity(message) {\n    setCustomError(this, this[innerInput], message)\n  }\n\n  [updateValidity](keepValid) {\n    this[internals].setFormValue(this.value, this.value)\n    const { validity } = this[innerInput]\n    if (validity.valid) {\n      this[internals].setValidity({})\n      this.ariaInvalid = keepValid ? 'false': null\n      markValid(this)\n    } else {\n      this[internals].setValidity(validity,\n        this[innerInput].validationMessage, this[innerInput])\n      if (this.getAttribute('aria-invalid') === 'true') {\n        markInvalid(this)\n      }\n    }\n  }\n}\n\ncustomElements.define('piwo-input', PiWoInput)\n","import { ElementMixin } from '../shared/element.js'\nimport thisStylesheet from './label.css'\n\nconst updateLabel = Symbol('updateLabel')\nlet counter = 0\n\nclass PiWoLabel extends ElementMixin(HTMLElement, {\n  attributes: {\n    for: {\n      type: 'string', property: 'htmlFor', reflect: true,\n      set() {\n        this[updateLabel]() \n      }\n    }\n  }\n}) {\n  #slot\n\n  constructor() {\n    super()\n    this.#slot = document.createElement('slot')\n    this.shadowRoot.appendChild(this.#slot)\n    this.shadowRoot.adoptedStyleSheets.push(thisStylesheet)\n\n    this.#slot.addEventListener('slotchange', () => this[updateLabel]())\n    this.addEventListener('click', event => this.#handleClick(event))\n  }\n\n  // ----- event handlers\n\n  #handleClick(event) {\n    if (event.metaKey || event.altKey || event.ctrlKey || event.shiftKey) return\n    const labelledTarget = this.#getLabelledTarget()\n    if (!labelledTarget || labelledTarget.disabled || event.target === labelledTarget) return\n    labelledTarget.focus()\n    labelledTarget.click()\n  }\n\n  // ----- connecting the label to a field\n\n  async [updateLabel]() {\n    // let the caller create the full markup after setting the `for` attribute\n    await Promise.resolve()\n    if (!this.id) {\n      this.id = `label${counter++}`\n    }\n    const oldTarget = this.#getLabelledTarget()\n    const newTarget = this.#getPointedTarget()\n    if (!newTarget || oldTarget === newTarget) return\n    if (oldTarget) {\n      oldTarget.removeAttribute('aria-labelledby')\n    }\n    newTarget.setAttribute('aria-labelledby', this.id)\n  }\n\n  #getLabelledTarget() {\n    const root = this.getRootNode()\n    return root.querySelector(`[aria-labelledby=\"${this.id}\"]`)\n  }\n\n  #getPointedTarget() {\n    // label cannot be delegated yet - https://github.com/WICG/webcomponents/issues/917\n    const targetId = this.htmlFor\n    if (targetId) {\n      const scope = this.getRootNode()\n      return scope.getElementById(targetId)\n    }\n    const children = this.#slot.assignedElements({ flatten: true })\n    const input = children.find(({ labels }) => labels)\n    return input ?? children[0]\n  }\n}\n\ncustomElements.define('piwo-label', PiWoLabel)\n","import { ElementMixin, internals } from '../shared/element.js'\nimport thisStylesheet from './link.css'\n\nclass PiWoLink extends ElementMixin(HTMLElement, {\n  internals: true,\n  attributes: {\n    href: { type: 'string', reflect: true },\n    target: { type: 'string', reflect: true },\n    referrerpolicy: { type: 'string', property: 'referrerPolicy', reflect: true },\n    rel: { type: 'string', reflect: true }\n  },\n  interactive: true\n}) {\n  constructor() {\n    super()\n    this[internals].role = 'link'\n\n    const slot = document.createElement('slot')\n    this.shadowRoot.appendChild(slot)\n    this.shadowRoot.adoptedStyleSheets.push(thisStylesheet)\n\n    this.addEventListener('click', event => this.#handleClick(event))\n    this.addEventListener('keyup', event => this.#handleKeyUp(event))\n  }\n\n  // ----- event handlers\n\n  #handleClick(event) {\n    if (event.metaKey || event.altKey || event.ctrlKey || event.shiftKey) return\n    // give a chance to handlers registered outside of this element\n    // to prevent the default behaviour\n    setTimeout(() => {\n      if (event.defaultPrevented) return\n      if (this.target) {\n        const features = []\n        if (this.referrerPolicy.includes('no-referrer')) {\n          features.push('noreferrer', 'noopener')\n        } else {\n          if (this.rel.includes('noreferrer')) {\n            features.push('noreferrer')\n          }\n          if (this.rel.includes('noopener')) {\n            features.push('noopener')\n          }\n        }\n        window.open(this.href, this.target, features.join(''))\n      } else {\n        location.href = this.href\n      }\n    })\n  }\n\n  #handleKeyUp(event) {\n    if (event.keyCode === 13 &&\n        !(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey)) {\n      this.click()\n    }\n  }\n}\n\ncustomElements.define('piwo-link', PiWoLink)\n","import { ElementMixin, internals } from '../shared/element.js'\nimport thisStylesheet from './p.css'\n\nclass PiWoParagraph extends ElementMixin(HTMLElement, {\n  internals: true\n}) {\n  constructor() {\n    super()\n    this[internals].role = 'paragraph'\n\n    const slot = document.createElement('slot')\n    this.shadowRoot.appendChild(slot)\n    this.shadowRoot.adoptedStyleSheets.push(thisStylesheet)\n  }\n}\n\ncustomElements.define('piwo-p', PiWoParagraph)\n","import { ElementMixin } from '../shared/element.js'\nimport thisStylesheet from './small.css'\n\nclass PiWoSmall extends ElementMixin(HTMLElement) {\n  #slot\n\n  constructor() {\n    super()\n    this.#slot = document.createElement('slot')\n    this.shadowRoot.appendChild(this.#slot)\n    this.shadowRoot.adoptedStyleSheets.push(thisStylesheet)\n  }\n}\n\ncustomElements.define('piwo-small', PiWoSmall)\n","import { ElementMixin } from '../shared/element.js'\nimport thisStylesheet from './spacer.css'\n\nconst updateSpace = Symbol('updateSpace')\n\nclass PiWoSpacer extends ElementMixin(HTMLElement, {\n  attributes: {\n    factor: {\n      type: 'number', reflect: true,\n      set() {\n        this[updateSpace]() \n      }\n    },\n    typography: { type: 'boolean', reflect: true }\n  }\n}) {\n  constructor() {\n    super()\n\n    this.shadowRoot.adoptedStyleSheets.push(thisStylesheet)\n  }\n\n  [updateSpace]() {\n    if (this.factor !== 1) {\n      this.style.setProperty('--pico-spacing-factor', this.factor)\n    } else {\n      this.style.removeProperty('--pico-spacing-factor')\n    }\n  }\n}\n\ncustomElements.define('piwo-spacer', PiWoSpacer)\n","import { ElementMixin, internals } from '../shared/element.js'\nimport { FieldMixin } from '../shared/field.js'\nimport { ensureMessageElement, formatPlural, markInvalid, markValid, onDisabledChange, setCustomError } from '../shared/helpers.js'\nimport thisStylesheet from './textarea.css'\n\nconst updateValidity = Symbol('updateValidity')\n\nclass PiWoTextArea extends FieldMixin(ElementMixin(HTMLElement, {\n  internals: true,\n  attributes: {\n    disabled: {\n      type: 'boolean', aria: true, state: true, reflect: true,\n      set(value) {\n        onDisabledChange(this, value)\n      }\n    },\n    readonly: { type: 'boolean', aria: 'ariaReadOnly', state: true, reflect: true },\n    required: { type: 'boolean', aria: 'ariaReadOnly', state: true, reflect: true },\n    describeerror: { type: 'boolean', property: 'describeError', reflect: true },\n    focuserror: { type: 'boolean', property: 'focusError', reflect: true },\n    name: { type: 'string', reflect: true },\n    placeholder: { type: 'string', internals: true, aria: true, reflect: true },\n    maxlength: { type: 'number', property: 'maxLength', value: -1, internals: true, reflect: true },\n    minlength: { type: 'number', property: 'minLength', value: -1, internals: true, reflect: true },\n    value: {\n      type: 'string',\n      set() {\n        this[updateValidity]()\n      }\n    }\n  },\n  interactive: true\n})) {\n  #errorAnchor\n\n  constructor() {\n    super()\n    // try {\n    //   this.contentEditable = 'plaintext-only'\n    // } catch {\n    this.contentEditable = true\n    // }\n\n    this[internals].role = 'textbox'\n    this[internals].ariaMultiLine = true\n\n    this.shadowRoot.adoptedStyleSheets.push(thisStylesheet)\n    const slot = document.createElement('slot')\n    this.shadowRoot.appendChild(slot)\n    this.#errorAnchor = createErrorAnchor(this)\n\n    // this.#errorAnchor.addEventListener('focus', () => this.focus())\n    this.addEventListener('beforeinput', event => this.#handleBeforeInput(event))\n    this.addEventListener('input', event => this.#handleInput(event))\n    this.addEventListener('blur', event => this.#handleBlur(event))\n  }\n\n  // ----- life-cycle callbacks\n\n  connectedCallback() {\n    super.connectedCallback()\n    const keepValid = this.getAttribute('aria-invalid') === 'false'\n    this.value = this.textContent\n    this[updateValidity](keepValid)\n    if (this.validity.valid) {\n      ensureMessageElement(this)\n    }\n  }\n\n  formResetCallback() {\n    this.value = this.textContent\n  }\n\n  formStateRestoreCallback(state, _mode) { // restore or autocomplete\n    this.value = state\n  }\n\n  // formAssociatedCallback(form) {\n  // }\n\n  // formDisabledCallback(disabled) {\n  // }\n\n  // ----- event handlers\n\n  #handleBeforeInput(event) {\n    if (this.readonly) {\n      event.preventDefault()\n    }\n  }\n\n  #dirty = false\n\n  #handleInput() {\n    this.#dirty = true\n    this.value = this.textContent\n  }\n\n  #handleBlur() {\n    if (this.#dirty) {\n      this.#dirty = false\n      this.dispatchEvent(new CustomEvent('change', {\n        detail: {\n          value: this.value,\n        },\n        bubbles: true,\n        cancelable: false,\n        composed: true\n      }))\n    }\n  }\n\n  // ----- form validation\n\n  setCustomValidity(message) {\n    setCustomError(this, this.#errorAnchor, message)\n  }\n\n  [updateValidity](keepValid) {\n    this[internals].setFormValue(this.value, this.value)\n    const { length } = this.value\n    const criteria = []\n    let message\n    if (this.required && !length) {\n      criteria.push('valueMissing')\n      message = 'Please fill out this field.'\n    }\n    if (this.minLength > 0 && this.minLength > length) {\n      criteria.push('tooShort')\n      if (!message) {\n        message = `Please use at least ${formatPlural(this.minLength, 'character')} characters (you are currently using ${formatPlural(length, 'character')}).`\n      }\n    }\n    if (this.minLength > 0 && this.maxLength < length) {\n      criteria.push('tooLong')\n      if (!message) {\n        message = `Please use at most ${formatPlural(this.maxLength, 'character')} characters (you are currently using ${formatPlural(length, 'character')}).`\n      }\n    }\n    if (message) {\n      const validity = {}\n      for (const criterion of criteria) {\n        validity[criterion] = true\n      }\n      this[internals].setValidity(validity, message, this.#errorAnchor)\n      if (this.getAttribute('aria-invalid') === 'true') {\n        markInvalid(this)\n      }\n      return\n    }\n    this[internals].setValidity({})\n    this.ariaInvalid = keepValid ? 'false': null\n    markValid(this)\n  }\n}\n\ncustomElements.define('piwo-textarea', PiWoTextArea)\n"],"names":["formatPlural","count","word","onDisabledChange","element","value","root","getRootNode","activeElement","blur","tabIndex","markValid","messageElement","textContent","originalMessage","style","display","markInvalid","ensureMessageElement","validationMessage","form","focusError","errorFocused","focus","setTimeout","document","adoptedStyleSheets","push","stylesheet","Symbol","messageIds","getAttribute","messageId","trim","split","slice","errorElement","getElementById","setCustomError","anchor","message","internals","setValidity","customError","ElementMixin","ParentElement","enableInternals","attributes","interactive","delegatesFocus","observedAttributeNames","ChildElement","constructor","attributeName","attachInternals","attachShadow","mode","shadowRoot","commonStylesheet","upgradeProperty","name","Object","hasOwn","property","observedAttributes","attributeChangedCallback","_oldValue","newValue","boolean","connectedCallback","hasAttribute","disabled","prototype","properties","number","setter","attribute","type","aria","state","reflect","set","propertyName","symbol","undefined","charAt","toUpperCase","Boolean","states","add","delete","String","toggleAttribute","call","Number","isNaN","setAttribute","configurable","enumerable","get","defineProperties","PiWoButton","HTMLElement","formAssociated","role","slot","createElement","appendChild","thisStylesheet","addEventListener","event","metaKey","altKey","ctrlKey","shiftKey","defaultPrevented","reset","keyCode","click","findClosestAncestorByTagName","tagName","parent","parentElement","setFormValue","submitter","button","insertAdjacentElement","requestSubmit","remove","customElements","define","FieldMixin","labels","length","findLabels","labelIds","reduce","id","label","explicitOriginalTarget","ariaInvalid","describeError","preventDefault","willValidate","validity","checkValidity","reportValidity","valid","updateValidity","PiWoCheckbox","readonly","required","describeerror","focuserror","checked","indeterminate","ariaChecked","createErrorAnchor","localName","keepValid","formResetCallback","formStateRestoreCallback","_mode","beforeInput","CustomEvent","bubbles","cancelable","composed","dispatchEvent","flag","detail","setCustomValidity","valueMissing","PiWoContainer","PiWoHeading","level","PiWoHorizontalRule","innerInput","PiWoInput","multiple","autocomplete","pattern","placeholder","max","min","step","maxlength","maxLength","minlength","minLength","ariaHidden","formDisabledCallback","newEvent","updateLabel","counter","PiWoLabel","for","labelledTarget","target","Promise","resolve","oldTarget","newTarget","removeAttribute","querySelector","targetId","htmlFor","scope","children","assignedElements","flatten","input","find","PiWoLink","href","referrerpolicy","rel","features","referrerPolicy","includes","window","open","join","location","PiWoParagraph","PiWoSmall","updateSpace","PiWoSpacer","factor","typography","setProperty","removeProperty","PiWoTextArea","contentEditable","ariaMultiLine","criteria","criterion"],"mappings":"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"}