{"version":3,"file":"index.min.mjs","sources":["/piwo/shared/helpers.js","/piwo/shared/globals.js","/piwo/elements/button.js","/piwo/elements/checkbox.js","/piwo/elements/h.js","/piwo/elements/input.js","/piwo/elements/label.js","/piwo/elements/msg.js","/piwo/elements/p.js","/piwo/elements/spacer.js"],"sourcesContent":["export function createStylesheet(styles) {\n  const stylesheet = new CSSStyleSheet()\n  stylesheet.replace(styles)\n  return stylesheet\n}\n\nexport function upgradeProperty(element, name) {\n  if (Object.hasOwn(element, name)) {\n    const value = element[name]\n    delete element[name]\n    element[name] = value\n  }\n}\n\nexport function findClosestAncestorByTagName(element, tagName) {\n\tfor (let parent;;) {\n    parent = element.parentElement\n    if (parent === null) {\n      return null\n    }\n\t\tif (parent.tagName === tagName) {\n\t\t\treturn parent\n\t\t}\n\t}\n}\n\nexport function findLabels(element) {\n  const labelIds = element.getAttribute('aria-labelledby')\n  if (labelIds) {\n    const root = element.getRootNode()\n    return labelIds\n      .trim()\n      .split[/ +/]\n      .reduce((labels, id) => {\n        const label = root.getElementById(id.trim())\n        if (label) {\n          labels.push(label)\n        }\n        return labels\n      }, [])\n  }\n}","import { createStylesheet } from './helpers.js'\nimport styles from './globals.css'\n\nconst stylesheet = createStylesheet(styles)\ndocument.adoptedStyleSheets.push(stylesheet)\n","import { createStylesheet, findClosestAncestorByTagName, upgradeProperty } from '../shared/helpers.js'\nimport styles from './button.css'\n\nconst stylesheet = createStylesheet(styles)\n\nclass PiWoButton extends HTMLElement {\n  #internals\n\n  static get formAssociated() {\n    return true\n  }\n\n  constructor() {\n    super()\n    this.#internals = this.attachInternals()\n    this.#internals.role = 'button'\n\n    this.attachShadow({ mode: 'open' })\n    const slot = document.createElement('slot')\n    this.shadowRoot.appendChild(slot)\n    this.shadowRoot.adoptedStyleSheets = [stylesheet]\n\n    this.addEventListener('click', event => this.#handleClick(event))\n    this.addEventListener('keyup', event => this.#handleKeyUp(event))\n\n    for (const name in PiWoButton.observedAttributes) {\n      upgradeProperty(this, name)\n    }\n  }\n\n  // ----- properties\n\n  get form() {\n    return this.#internals.form\n  }\n\n  #name = ''\n\n  get name() {\n    return this.#name\n  }\n\n  set name(value) {\n    if (value == null) value = ''\n    if (value === this.name) return\n    this.#name = value\n    this.setAttribute('name', value)\n  }\n\n  get disabled() {\n    return this.#internals.states.has('disabled')\n  }\n\n  set disabled(flag) {\n    flag = !!flag\n    if (flag === this.disabled) return\n    if (flag) {\n      this.#internals.states.add('disabled')\n      const root = this.getRootNode()\n      if (root.activeElement === this) {\n        this.blur()\n      }\n      if (this.tabIndex >= 0) {\n        this.tabIndex = -1\n      }\n    } else {\n      this.#internals.states.delete('disabled')\n      if (this.tabIndex < 0) {\n        this.tabIndex = 0\n      }\n    }\n    this.#internals.ariaDisabled = String(flag)\n  }\n\n  // ----- life-cycle callbacks\n\n  static get observedAttributes() {\n    return ['disabled', 'name']\n  }\n\n  attributeChangedCallback(name, _oldValue, newValue) {\n    switch(name) {\n      case 'disabled':\n        this.disabled = newValue != null\n        break\n      case 'name':\n        this.name = newValue\n        break\n    }\n  }\n\n  connectedCallback() {\n    // not yet in internals - https://github.com/WICG/webcomponents/issues/762\n    if (!this.hasAttribute('tabindex')) {\n      this.tabIndex = 0\n    }\n  }\n\n  // ----- event handlers\n\n  #handleClick(event) {\n    if (!this.disabled &&\n        !(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey)) {\n      // give a chance to handlers registered outside of this element\n      // to prevent the default behaviour\n      setTimeout(() => {\n        if (event.defaultPrevented) return\n        // submit and reset buttons cannot be marked yet - https://github.com/WICG/webcomponents/issues/814\n        const form = this.#getForm()\n        if (form) {\n          const type = this.getAttribute('type')\n          if (!type || type === 'submit') {\n            this.#submitForm(form)\n          } else if (type === 'reset') {\n            form.reset()\n          }\n        }\n      })\n    }\n  }\n\n  #handleKeyUp(event) {\n    if (!this.disabled &&\n        (event.keyCode === 13 || event.keyCode === 32) &&\n        !(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey)) {\n      this.click()\n    }\n  }\n\n  // ----- submitting the connected form\n\n  #getForm() {\n    return this.form ?? findClosestAncestorByTagName(this, 'FORM')\n  }\n\n  #submitForm(form) {\n    const { name } = this\n    if (name) {\n      this.#internals.setFormValue(this.textContent.trim())\n    }\n    const submitter = document.createElement('input')\n    submitter.type = 'submit'\n    this.insertAdjacentElement('afterend', submitter)\n    form.submitter = submitter\n    form.requestSubmit(submitter)\n    // let submit handlers to create FormData with the submitter's name and value\n    setTimeout(() => {\n      if (name) {\n        this.#internals.setFormValue(null)\n      }\n      form.submitter = undefined\n      submitter.remove()\n    })\n  }\n}\n\ncustomElements.define('piwo-button', PiWoButton)\n","import { createStylesheet, findLabels, upgradeProperty } from '../shared/helpers.js'\nimport styles from './checkbox.css'\n\nconst stylesheet = createStylesheet(styles)\nconst booleanAttributes = [\n  'disabled', 'readonly', 'required', 'describeerror', 'focuserror'\n]\nconst allAttributes = booleanAttributes.concat('name')\n\nclass PiWoCheckbox extends HTMLElement {\n  #internals\n  #errorAnchor\n\n  static get formAssociated() {\n    return true\n  }\n\n  constructor() {\n    super()\n    this.#internals = this.attachInternals()\n    this.#internals.role = 'checkbox'\n    this.#internals.ariaChecked = 'false'\n\n    this.attachShadow({ mode: 'open' })\n    this.shadowRoot.adoptedStyleSheets = [stylesheet]\n    this.#errorAnchor = document.createElement('input')\n    this.#errorAnchor.ariaHidden = 'true'\n    this.shadowRoot.appendChild(this.#errorAnchor)\n\n    this.addEventListener('click', event => this.#handleClick(event))\n    this.addEventListener('keyup', event => this.#handleKeyUp(event))\n    this.addEventListener('invalid', event => this.#handleInvalid(event))\n\n    for (const name in PiWoCheckbox.observedAttributes) {\n      upgradeProperty(this, name)\n    }\n  }\n\n  // ----- properties\n\n  get form() {\n    return this.#internals.form\n  }\n\n  get labels() {\n    const labels = this.#internals.labels\n    if (labels.length) return labels\n    return findLabels(this)\n  }\n\n  #name = ''\n\n  get name() {\n    return this.#name\n  }\n\n  set name(value) {\n    if (value == null) value = ''\n    if (value === this.name) return\n    this.#name = value\n    this.setAttribute('name', value)\n  }\n\n  get type() {\n    return this.localName\n  }\n\n  // get value() {\n  //   return this.checked ? 'on' : this.willValidate ? '' : null\n  // }\n\n  // set value(flag) {\n  //   this.checked = flag === 'on'\n  // }\n\n  get checked() {\n    return this.#getFlag('checked')\n  }\n\n  set checked(flag) {\n    if (this.#setFlag('checked', 'Checked', false, flag)) {\n      this.#internals.states.delete('indeterminate')\n      this.#updateValidity()\n    }\n  }\n\n  get indeterminate() {\n    return this.#getFlag('indeterminate')\n  }\n\n  set indeterminate(flag) {\n    if (this.#setFlag('indeterminate', undefined, false, flag)) {\n      if (flag) {\n        this.#internals.ariaChecked = 'mixed'\n      } else {\n        this.#internals.ariaChecked = String(this.checked)\n      }\n    }\n  }\n\n  #describeError = false\n\n  get describeError() {\n    return this.#describeError\n  }\n\n  set describeError(value) {\n    value = Boolean(value)\n    if (value === this.describeError) return\n    this.#describeError = value\n    this.toggleAttribute('describeerror', value)\n  }\n\n  #focusError = false\n\n  get focusError() {\n    return this.#focusError\n  }\n\n  set focusError(value) {\n    value = Boolean(value)\n    if (value === this.focusError) return\n    this.#focusError = value\n    this.toggleAttribute('focuserror', value)\n  }\n\n  get disabled() {\n    return this.#getFlag('disabled')\n  }\n\n  set disabled(flag) {\n    if (this.#setFlag('disabled', 'Disabled', true, flag)) {\n      if (flag) {\n        const root = this.getRootNode()\n        if (root.activeElement === this) {\n          this.blur()\n        }\n        if (this.tabIndex >= 0) {\n          this.tabIndex = -1\n        }\n      } else {\n        if (this.tabIndex < 0) {\n          this.tabIndex = 0\n        }\n      }\n    }\n  }\n\n  get readonly() {\n    return this.#getFlag('readonly')\n  }\n\n  set readonly(flag) {\n    this.#setFlag('readonly', 'ReadOnly', true, flag)\n  }\n\n  get required() {\n    return this.#getFlag('required')\n  }\n\n  set required(flag) {\n    this.#setFlag('required', 'Required', true, flag)\n  }\n\n  #getFlag(name) {\n    return this.#internals.states.has(name)\n  }\n\n  #setFlag(name, ariaName, attribute, flag) {\n    flag = Boolean(flag)\n    if (flag === this[name]) return\n    if (flag) {\n      this.#internals.states.add(name)\n    } else {\n      this.#internals.states.delete(name)\n    }\n    if (attribute) {\n      this.toggleAttribute(name, flag)\n    }\n    if (ariaName) {\n      this.#internals[`aria${ariaName}`] = String(flag)\n    }\n    return true\n  }\n\n  // ----- life-cycle callbacks\n\n  static get observedAttributes() {\n    return allAttributes\n  }\n\n  attributeChangedCallback(name, _oldValue, newValue) {\n    if (booleanAttributes.includes(name)) {\n      newValue = newValue != null\n      switch (name) {\n        case 'describeerror':\n          this.describeError = newValue\n          break\n        case 'focuserror':\n          this.focusError = newValue\n          break\n        default:\n          this[name] = newValue\n      }\n    } else {\n      this[name] = newValue\n    }\n  }\n\n  connectedCallback() {\n    // not yet in internals - https://github.com/WICG/webcomponents/issues/762\n    if (!this.hasAttribute('tabindex')) {\n      this.tabIndex = 0\n    }\n    const keepValid = this.getAttribute('aria-invalid') === 'false'\n    this.checked = this.hasAttribute('checked')\n    if (this.hasAttribute('indeterminate')) {\n      this.indeterminate = true\n    }\n    this.#updateValidity(keepValid)\n  }\n\n  formResetCallback() {\n    this.checked = this.hasAttribute('checked')\n  }\n\n  formStateRestoreCallback(state, _mode) { // restore or autocomplete\n    this.checked = state === 'checked'\n  }\n\n  // formAssociatedCallback(form) {\n  // }\n\n  // formDisabledCallback(disabled) {\n  //   this.disabled = disabled\n  // }\n\n  // ----- event handlers\n\n  #handleClick(event) {\n    if (!(this.disabled || this.readonly) &&\n        !(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey)) {\n      // give a chance to handlers registered outside of this element\n      // to prevent the default behaviour\n      setTimeout(() => {\n        if (event.defaultPrevented) return\n\n        const beforeInput = new CustomEvent('beforeinput', {\n          bubbles: true,\n          cancelable: true,\n          composed: true\n        })\n        this.dispatchEvent(beforeInput)\n        if (beforeInput.defaultPrevented) return\n\n        const flag = !this.checked\n        this.checked = flag\n\n        this.dispatchEvent(new CustomEvent('input', {\n          bubbles: true,\n          cancelable: false,\n          composed: true\n        }))\n        this.dispatchEvent(new CustomEvent('change', {\n          detail: {\n            checked: flag,\n          },\n          bubbles: true,\n          cancelable: false,\n          composed: true\n        }))\n      })\n    }\n  }\n\n  #handleKeyUp(event) {\n    if (!this.disabled &&\n        event.keyCode === 32 &&\n        !(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey)) {\n      // give a chance to handlers registered outside of this element\n      // to prevent the default behaviour\n      setTimeout(() => {\n        if (event.defaultPrevented) return\n        this.click()\n      })\n    }\n  }\n\n  #handleInvalid(event) {\n    // detect if `reportValidity` was called from a user interaction\n    if (event.explicitOriginalTarget && event.explicitOriginalTarget !== this || this.form.submitter) {\n      this.ariaInvalid = 'true'\n      if (this.describeError) {\n        event.preventDefault()\n        this.#markInvalid()\n      }\n    }\n  }\n\n  #markInvalid() {\n    const messageIds = this.getAttribute('aria-describedby')\n    if (messageIds) {\n      const messageId = messageIds.trim().split(/ +/).slice(-1)[0]\n      if (messageId) {\n        const messageElement = document.getElementById(messageId.trim())\n        if (messageElement) {\n          if (!this.#messageElement) {\n            this.#messageElement = messageElement\n            this.#originalMessage = messageElement.textContent\n            if (!this.#originalMessage) {\n              this.#messageElement.style.display = ''\n            }\n          }\n          messageElement.textContent = this.validationMessage\n          if (this.focusError) {\n            this.focus()\n          }\n        }\n      }\n    }\n  }\n\n  // ----- form validation\n\n  get willValidate() {\n    return this.#internals.willValidate\n  }\n\n  get validity() {\n    return this.#internals.validity\n  }\n\n  get validationMessage() {\n    return this.#internals.validationMessage\n  }\n\n  // #invalidEvent\n\n  checkValidity() {\n    return this.#internals.checkValidity()\n    // if (this.willValidate) {\n    //   if (this.required && !this.checked) {\n    //     // this.ariaInvalid = 'true'\n    //     this.#internals.setValidity({ valueMissing: true },\n    //       'Please check this box if you want to proceed.', this.#errorAnchor)\n    //     // this.setAttribute('aria-errormessage', this.#internals.validationMessage)\n    //     this.#invalidEvent = new CustomEvent('invalid', {\n    //       bubbles: true,\n    //       cancelable: true,\n    //       composed: true\n    //     })\n    //     this.dispatchEvent(this.#invalidEvent)\n    //     return false\n    //   }\n    // }\n    // // this.ariaInvalid = 'false'\n    // this.#internals.setValidity({})\n    // // this.setAttribute('aria-errormessage', '')\n    // return true\n  }\n\n  reportValidity() {\n    this.ariaInvalid = String(!this.validity.valid)\n    return this.#internals.reportValidity()\n    // const result = this.checkValidity()\n    // if (result) {\n    //   this.#errorAnchor.textContent = ''\n    // } else {\n    //   this.#errorAnchor.textContent = this.#invalidEvent.defaultPrevented\n    //     ? '' : this.#internals.validationMessage\n    // }\n    // return result\n  }\n\n  setCustomValidity(message) {\n    // this.setAttribute('aria-errormessage', message)\n    if (message) {\n      // this.ariaInvalid = 'true'\n      this.#internals.setValidity({ customError: true }, message, this.#errorAnchor)\n    } else {\n      // this.ariaInvalid = 'false'\n      this.#internals.setValidity({})\n    }\n  }\n\n  #messageElement\n  #originalMessage = ''\n\n  #updateValidity(keepValid) {\n    if (this.checked) {\n      this.#internals.setFormValue('on', 'checked')\n    } else {\n      this.#internals.setFormValue(null)\n    }\n    if (this.required && !this.checked) {\n      this.#internals.setValidity({ valueMissing: true },\n        'Please check this box if you want to proceed.', this.#errorAnchor)\n        if (this.getAttribute('aria-invalid') === 'true') {\n          this.#markInvalid()\n        }\n    } else {\n      this.#internals.setValidity({})\n      this.ariaInvalid = keepValid ? 'false': null\n      if (this.#messageElement) {\n        this.#messageElement.textContent = this.#originalMessage\n        if (!this.#originalMessage) {\n          this.#messageElement.style.display = 'none'\n        }\n        this.#messageElement = null\n        this.#originalMessage = ''\n      }\n    }\n  }\n}\n\ncustomElements.define('piwo-checkbox', PiWoCheckbox)\n","import { createStylesheet, upgradeProperty } from '../shared/helpers.js'\nimport styles from './h.css'\n\nconst stylesheet = createStylesheet(styles)\n\nclass PiWoHeading extends HTMLElement {\n  #internals\n\n  constructor() {\n    super()\n    this.#internals = this.attachInternals()\n    this.#internals.role = 'heading'\n\n    this.attachShadow({ mode: 'open' })\n    const slot = document.createElement('slot')\n    this.shadowRoot.appendChild(slot)\n    this.shadowRoot.adoptedStyleSheets = [stylesheet]\n\n    upgradeProperty(this, 'level')\n  }\n\n  // ----- properties\n\n  #level = ''\n\n  get level() {\n    return this.#level\n  }\n\n  set level(value) {\n    if (value == null) value = ''\n    if (value === this.level) return\n    this.#internals.ariaLevel = value\n    this.toggleAttribute('level', value)\n  }\n\n  // ----- life-cycle callbacks\n\n  static get observedAttributes() {\n    return ['level']\n  }\n\n  attributeChangedCallback(name, _oldValue, newValue) {\n    this[name] = newValue\n  }\n}\n\ncustomElements.define('piwo-h', PiWoHeading)\n","import { createStylesheet, findLabels, upgradeProperty } from '../shared/helpers.js'\nimport styles from './input.css'\n\nconst stylesheet = createStylesheet(styles)\nconst booleanAttributes = [\n  'disabled', 'readonly', 'required', 'multiple', 'describeerror', 'focuserror'\n]\nconst stringAttributes = [\n  'name', 'type', 'placeholder', 'autocomplete', 'step', 'pattern',\n  'max', 'min', 'maxLength', 'minLength'\n]\nconst allAttributes = booleanAttributes.concat(stringAttributes)\n\nclass PiWoInput extends HTMLElement {\n  #internals\n  #innerInput\n\n  static get formAssociated() {\n    return true\n  }\n\n  constructor() {\n    super()\n    this.#internals = this.attachInternals()\n    this.#internals.role = 'textbox'\n\n    this.attachShadow({ mode: 'open', delegatesFocus: true })\n    this.shadowRoot.adoptedStyleSheets = [stylesheet]\n    this.#innerInput = document.createElement('input')\n    this.#innerInput.ariaHidden = 'true'\n    this.shadowRoot.appendChild(this.#innerInput)\n\n    this.#innerInput.addEventListener('beforeinput', event => this.#handleBeforeInput(event))\n    this.#innerInput.addEventListener('input', event => this.#handleInput(event))\n    this.#innerInput.addEventListener('change', event => this.#handleChange(event))\n    this.addEventListener('invalid', event => this.#handleInvalid(event))\n\n    for (const name in PiWoInput.observedAttributes) {\n      upgradeProperty(this, name)\n    }\n  }\n\n  // ----- properties\n\n  get form() {\n    return this.#internals.form\n  }\n\n  get labels() {\n    const labels = this.#internals.labels\n    if (labels.length) return labels\n    return findLabels(this)\n  }\n\n  #name = ''\n\n  get name() {\n    return this.#name\n  }\n\n  set name(value) {\n    if (value == null) value = ''\n    if (value === this.name) return\n    this.#name = value\n    this.setAttribute('name', value)\n  }\n\n  #type = ''\n\n  get type() {\n    return this.#type\n  }\n\n  set type(value) {\n    if (value == null) value = ''\n    if (value === this.type) return\n    this.#type = this.#innerInput.type = value\n    this.setAttribute('type', this.#type)\n  }\n\n  #placeholder = ''\n\n  get placeholder() {\n    return this.#placeholder\n  }\n\n  set placeholder(value) {\n    if (value == null) value = ''\n    if (value === this.placeholder) return\n    this.#placeholder = this.#innerInput.placeholder = value\n    this.setAttribute('placeholder', this.#placeholder)\n  }\n\n  #value = ''\n\n  get value() {\n    return this.#value\n  }\n\n  set value(value) {\n    if (value == null) value = ''\n    if (value === this.value) return\n    this.#value = this.#innerInput.value = value\n    this.#updateValidity()\n  }\n\n  #autocomplete = ''\n\n  get autocomplete() {\n    return this.#autocomplete\n  }\n\n  set autocomplete(value) {\n    if (value == null) value = ''\n    if (value === this.autocomplete) return\n    this.#autocomplete = this.#innerInput.autocomplete = value\n    this.setAttribute('autocomplete', value)\n  }\n\n  #max = ''\n\n  get max() {\n    return this.#max\n  }\n\n  set max(value) {\n    if (value == null) value = ''\n    if (value === this.max) return\n    this.#max = this.#innerInput.max = value\n    this.setAttribute('max', value)\n  }\n\n  #min = ''\n\n  get min() {\n    return this.#min\n  }\n\n  set min(value) {\n    if (value == null) value = ''\n    if (value === this.min) return\n    this.#min = this.#innerInput.min = value\n    this.setAttribute('min', value)\n  }\n\n  #maxLength = -1\n\n  get maxLength() {\n    return this.#maxLength\n  }\n\n  set maxLength(value) {\n    if (value == null) {\n      value = -1\n    } else {\n      value = +value\n      if (Number.isNaN(value)) {\n        value = -1\n      }\n    }\n    if (value === this.maxLength) return\n    this.#maxLength = this.#innerInput.maxLength = value\n    this.setAttribute('maxlength', value)\n  }\n\n  #minLength = -1\n\n  get minLength() {\n    return this.#minLength\n  }\n\n  set minLength(value) {\n    if (value == null) {\n      value = -1\n    } else {\n      value = +value\n      if (Number.isNaN(value)) {\n        value = -1\n      }\n    }\n    if (value === this.minLength) return\n    this.#minLength = this.#innerInput.minLength = value\n    this.setAttribute('minlength', value)\n  }\n\n  #multiple = false\n\n  get multiple() {\n    return this.#multiple\n  }\n\n  set multiple(value) {\n    value = Boolean(value)\n    if (value === this.multiple) return\n    this.#multiple = this.#innerInput.multiple = value\n    this.toggleAttribute('multiple', value)\n  }\n\n  #describeError = false\n\n  get describeError() {\n    return this.#describeError\n  }\n\n  set describeError(value) {\n    value = Boolean(value)\n    if (value === this.describeError) return\n    this.#describeError = value\n    this.toggleAttribute('describeerror', value)\n  }\n\n  #focusError = false\n\n  get focusError() {\n    return this.#focusError\n  }\n\n  set focusError(value) {\n    value = Boolean(value)\n    if (value === this.focusError) return\n    this.#focusError = value\n    this.toggleAttribute('focuserror', value)\n  }\n\n  #pattern = ''\n\n  get pattern() {\n    return this.#pattern\n  }\n\n  set pattern(value) {\n    if (value == null) value = ''\n    if (value === this.pattern) return\n    this.#pattern = this.#innerInput.pattern = value\n    this.setAttribute('pattern', value)\n  }\n\n  #step = ''\n\n  get step() {\n    return this.#step\n  }\n\n  set step(value) {\n    if (value == null) value = ''\n    if (value === this.step) return\n    this.#step = this.#innerInput.step = value\n    this.setAttribute('step', value)\n  }\n\n  get disabled() {\n    return this.#getFlag('disabled')\n  }\n\n  set disabled(flag) {\n    if (this.#setFlag('disabled', 'Disabled', true, flag)) {\n      if (flag) {\n        const root = this.getRootNode()\n        if (root.activeElement === this) {\n          this.blur()\n        }\n        if (this.tabIndex >= 0) {\n          this.tabIndex = -1\n        }\n      } else {\n        if (this.tabIndex < 0) {\n          this.tabIndex = 0\n        }\n      }\n    }\n  }\n\n  get readonly() {\n    return this.#getFlag('readonly')\n  }\n\n  set readonly(flag) {\n    this.#setFlag('readonly', 'ReadOnly', true, flag)\n  }\n\n  get required() {\n    return this.#getFlag('required')\n  }\n\n  set required(flag) {\n    this.#setFlag('required', 'Required', true, flag)\n  }\n\n  #getFlag(name) {\n    return this.#internals.states.has(name)\n  }\n\n  #setFlag(name, ariaName, attribute, flag) {\n    flag = Boolean(flag)\n    if (flag === this[name]) return\n    if (flag) {\n      this.#internals.states.add(name)\n    } else {\n      this.#internals.states.delete(name)\n    }\n    this.#innerInput[name] = flag\n    if (attribute) {\n      this.toggleAttribute(name, flag)\n      this.#innerInput.toggleAttribute(name, flag)\n    }\n    if (ariaName) {\n      this.#internals[`aria${ariaName}`] = String(flag)\n    }\n    return true\n  }\n\n  // ----- life-cycle callbacks\n\n  static get observedAttributes() {\n    return allAttributes\n  }\n\n  attributeChangedCallback(name, _oldValue, newValue) {\n    if (booleanAttributes.includes(name)) {\n      newValue = newValue != null\n      switch (name) {\n        case 'describeerror':\n          this.describeError = newValue\n          break\n        case 'focuserror':\n          this.focusError = newValue\n          break\n        default:\n          this[name] = newValue\n      }\n    } else {\n      this[name] = newValue\n    }\n  }\n\n  connectedCallback() {\n    // not yet in internals - https://github.com/WICG/webcomponents/issues/762\n    if (!this.hasAttribute('tabindex')) {\n      this.tabIndex = 0\n    }\n    const keepValid = this.getAttribute('aria-invalid') === 'false'\n    this.value = this.getAttribute('value')\n    this.#updateValidity(keepValid)\n  }\n\n  formResetCallback() {\n    this.value = this.getAttribute('value')\n  }\n\n  formStateRestoreCallback(state, _mode) { // restore or autocomplete\n    this.value = state\n  }\n\n  // formAssociatedCallback(form) {\n  // }\n\n  formDisabledCallback(disabled) {\n    this.#innerInput.disabled = disabled\n  }\n\n  // ----- event handlers\n\n  #handleBeforeInput(event) {\n    const newEvent = this.#forwardEvent(event)\n    if (newEvent.defaultPrevented) {\n      event.preventDefault()\n    }\n  }\n\n  #handleInput(event) {\n    this.value = this.#innerInput.value\n    this.#forwardEvent(event)\n  }\n\n  #handleChange(event) {\n    this.value = this.#innerInput.value\n    this.#forwardEvent(event)\n  }\n\n  #handleInvalid(event) {\n    // detect if `reportValidity` was called from a user interaction\n    if (event.explicitOriginalTarget && event.explicitOriginalTarget !== this || this.form.submitter) {\n      this.ariaInvalid = 'true'\n      if (this.describeError) {\n        event.preventDefault()\n        this.#markInvalid()\n      }\n    }\n  }\n\n  #markInvalid() {\n    const messageIds = this.getAttribute('aria-describedby')\n    if (messageIds) {\n      const messageId = messageIds.trim().split(/ +/).slice(-1)[0]\n      if (messageId) {\n        const messageElement = document.getElementById(messageId.trim())\n        if (messageElement) {\n          if (!this.#messageElement) {\n            this.#messageElement = messageElement\n            this.#originalMessage = messageElement.textContent\n            if (!this.#originalMessage) {\n              this.#messageElement.style.display = ''\n            }\n          }\n          messageElement.textContent = this.validationMessage\n          if (this.focusError) {\n            this.focus()\n          }\n        }\n      }\n    }\n  }\n\n  #forwardEvent(event) {\n    const newEvent = new event.constructor(event.type, event)\n    this.dispatchEvent(newEvent)\n    return newEvent\n  }\n\n  // ----- form validation\n\n  get willValidate() {\n    return this.#internals.willValidate\n  }\n\n  get validity() {\n    return this.#internals.validity\n  }\n\n  get validationMessage() {\n    return this.#internals.validationMessage\n  }\n\n  checkValidity() {\n    return this.#internals.checkValidity() && this.#innerInput.checkValidity()\n  }\n\n  reportValidity() {\n    this.ariaInvalid = String(!this.validity.valid)\n    return this.#internals.reportValidity() && this.#internals.checkValidity()\n  }\n\n  setCustomValidity(message) {\n    if (message) {\n      this.#internals.setValidity({ customError: true }, message, this.#innerInput)\n    } else {\n      this.#internals.setValidity({})\n    }\n  }\n\n  #messageElement\n  #originalMessage = ''\n\n  #updateValidity(keepValid) {\n    this.#internals.setFormValue(this.#value, this.#value);\n    const { validity } = this.#innerInput\n    if (validity.valid) {\n      this.#internals.setValidity({})\n      this.ariaInvalid = keepValid ? 'false': null\n      if (this.#messageElement) {\n        this.#messageElement.textContent = this.#originalMessage\n        if (!this.#originalMessage) {\n          this.#messageElement.style.display = 'none'\n        }\n        this.#messageElement = null\n        this.#originalMessage = ''\n      }\n    } else {\n      this.#internals.setValidity(validity,\n        this.#innerInput.validationMessage, this.#innerInput)\n      if (this.getAttribute('aria-invalid') === 'true') {\n        this.#markInvalid()\n      }\n    }\n  }\n}\n\ncustomElements.define('piwo-input', PiWoInput)\n","import { createStylesheet, upgradeProperty } from '../shared/helpers.js'\n\nimport styles from './label.css'\n\nconst stylesheet = createStylesheet(styles)\nlet counter = 0\n\nclass PiWoLabel extends HTMLElement {\n  #slot\n\n  constructor() {\n    super()\n    this.attachShadow({ mode: 'open' })\n    this.#slot = document.createElement('slot')\n    this.shadowRoot.appendChild(this.#slot)\n    this.shadowRoot.adoptedStyleSheets = [stylesheet]\n\n    this.#slot.addEventListener('slotchange', () => this.#updateLabel())\n    this.addEventListener('click', event => this.#handleClick(event))\n\n    upgradeProperty(this, 'htmlFor')\n  }\n\n  // ----- properties\n\n  #for = ''\n\n  get htmlFor() {\n    return this.#for\n  }\n\n  set htmlFor(value) {\n    if (value == null) value = ''\n    if (value === this.htmlFor) return\n    this.#for = value\n    this.setAttribute('for', value)\n    this.#updateLabel()\n  }\n\n  // ----- life-cycle callbacks\n\n  static get observedAttributes() {\n    return ['for']\n  }\n\n  attributeChangedCallback(_name, _oldValue, newValue) {\n    this.htmlFor = newValue\n  }\n\n  // ----- event handlers\n\n  #handleClick(event) {\n    if (event.metaKey || event.altKey || event.ctrlKey || event.shiftKey) return\n    const labelledTarget = this.#getLabelledTarget()\n    if (!labelledTarget || labelledTarget.disabled || event.target === labelledTarget) return\n    labelledTarget.focus()\n    labelledTarget.click()\n  }\n\n  // ----- connecting the label to a field\n\n  async #updateLabel() {\n    // let the caller create the full markup after setting the `for` attribute\n    await Promise.resolve()\n    if (!this.id) {\n      this.id = `label${counter++}`\n    }\n    const oldTarget = this.#getLabelledTarget()\n    const newTarget = this.#getPointedTarget()\n    if (!newTarget || oldTarget === newTarget) return\n    if (oldTarget) {\n      oldTarget.removeAttribute('aria-labelledby')\n    }\n    newTarget.setAttribute('aria-labelledby', this.id)\n  }\n\n  #getLabelledTarget() {\n    const root = this.getRootNode()\n    return root.querySelector(`[aria-labelledby=\"${this.id}\"]`)\n  }\n\n  #getPointedTarget() {\n    // label cannot be delegated yet - https://github.com/WICG/webcomponents/issues/917\n    const targetId = this.htmlFor\n    if (targetId) {\n      const scope = this.getRootNode()\n      return scope.getElementById(targetId)\n    }\n    const children = this.#slot.assignedElements({ flatten: true })\n    const input = children.find(({ labels }) => labels)\n    return input ?? children[0]\n  }\n}\n\ncustomElements.define('piwo-label', PiWoLabel)\n","import { createStylesheet } from '../shared/helpers.js'\n\nimport styles from './msg.css'\n\nconst stylesheet = createStylesheet(styles)\n\nclass PiWoMessage extends HTMLElement {\n  #slot\n\n  constructor() {\n    super()\n    this.attachShadow({ mode: 'open' })\n    this.#slot = document.createElement('slot')\n    this.shadowRoot.appendChild(this.#slot)\n    this.shadowRoot.adoptedStyleSheets = [stylesheet]\n  }\n}\n\ncustomElements.define('piwo-msg', PiWoMessage)\n","import { createStylesheet } from '../shared/helpers.js'\nimport styles from './p.css'\n\nconst stylesheet = createStylesheet(styles)\n\nclass PiWoParagraph extends HTMLElement {\n  #internals\n\n  constructor() {\n    super()\n    this.#internals = this.attachInternals()\n    this.#internals.role = 'paragraph'\n\n    this.attachShadow({ mode: 'open' })\n    const slot = document.createElement('slot')\n    this.shadowRoot.appendChild(slot)\n    this.shadowRoot.adoptedStyleSheets = [stylesheet]\n  }\n}\n\ncustomElements.define('piwo-p', PiWoParagraph)\n","import { createStylesheet, upgradeProperty } from '../shared/helpers.js'\nimport styles from './spacer.css'\n\nconst stylesheet = createStylesheet(styles)\n\nclass PiWoSpacer extends HTMLElement {\n  constructor() {\n    super()\n\n    this.attachShadow({ mode: 'open' })\n    this.shadowRoot.adoptedStyleSheets = [stylesheet]\n\n    upgradeProperty(this, 'factor')\n    upgradeProperty(this, 'typography')\n  }\n\n  // ----- properties\n\n  #factor = 1\n\n  get factor() {\n    return this.#factor\n  }\n\n  set factor(value) {\n    if (value == null) {\n      value = 1\n    } else {\n      value = +value\n      if (Number.isNaN(value)) {\n        value = 1\n      }\n    }\n    if (value === this.factor) return\n    this.#factor = value\n    this.setAttribute('factor', String(value))\n    this.#updateSpace()\n  }\n\n  #typography = false\n\n  get typography() {\n    return this.#typography\n  }\n\n  set typography(value) {\n    value = Boolean(value)\n    if (value === this.typography) return\n    this.#typography = value\n    this.toggleAttribute('typography', value)\n  }\n\n  // ----- life-cycle callbacks\n\n  static get observedAttributes() {\n    return ['factor', 'typography']\n  }\n\n  attributeChangedCallback(name, _oldValue, newValue) {\n    this[name] = newValue\n  }\n\n  #updateSpace() {\n    if (this.factor !== 1) {\n      this.style.setProperty('--pico-spacing-factor', this.factor)\n    } else {\n      this.style.removeProperty('--pico-spacing-factor')\n    }\n  }\n}\n\ncustomElements.define('piwo-spacer', PiWoSpacer)\n"],"names":["createStylesheet","styles","stylesheet","CSSStyleSheet","replace","upgradeProperty","element","name","Object","hasOwn","value","findLabels","labelIds","getAttribute","root","getRootNode","trim","split","reduce","labels","id","label","getElementById","push","document","adoptedStyleSheets","PiWoButton","HTMLElement","formAssociated","constructor","attachInternals","role","attachShadow","mode","slot","createElement","shadowRoot","appendChild","addEventListener","event","observedAttributes","form","setAttribute","disabled","states","has","flag","add","activeElement","blur","tabIndex","delete","ariaDisabled","String","attributeChangedCallback","_oldValue","newValue","connectedCallback","hasAttribute","metaKey","altKey","ctrlKey","shiftKey","setTimeout","defaultPrevented","type","reset","keyCode","click","findClosestAncestorByTagName","tagName","parent","parentElement","setFormValue","textContent","submitter","insertAdjacentElement","requestSubmit","undefined","remove","customElements","define","booleanAttributes","allAttributes","concat","PiWoCheckbox","ariaChecked","ariaHidden","length","localName","checked","indeterminate","describeError","Boolean","toggleAttribute","focusError","readonly","required","ariaName","attribute","includes","keepValid","formResetCallback","formStateRestoreCallback","state","_mode","beforeInput","CustomEvent","bubbles","cancelable","composed","dispatchEvent","detail","explicitOriginalTarget","ariaInvalid","preventDefault","messageIds","messageId","slice","messageElement","style","display","validationMessage","focus","willValidate","validity","checkValidity","reportValidity","valid","setCustomValidity","message","setValidity","customError","valueMissing","PiWoHeading","level","ariaLevel","PiWoInput","delegatesFocus","placeholder","autocomplete","max","min","maxLength","Number","isNaN","minLength","multiple","pattern","step","formDisabledCallback","newEvent","counter","PiWoLabel","htmlFor","_name","labelledTarget","target","Promise","resolve","oldTarget","newTarget","removeAttribute","querySelector","targetId","scope","children","assignedElements","flatten","input","find","PiWoMessage","PiWoParagraph","PiWoSpacer","factor","typography","setProperty","removeProperty"],"mappings":"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"}